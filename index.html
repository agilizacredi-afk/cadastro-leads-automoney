<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cadastro de Leads Automoney</title>
<style>
:root{
  --bg:#f6f7f9; --card:#ffffff; --border:#e6e8ef;
  --ink:#122A41; --muted:#6b7280; --brand:#17C948;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif}
body{margin:0;background:var(--bg);color:var(--ink)}
.wrap{max-width:880px;margin:28px auto;padding:16px}
.header{display:flex;align-items:center;gap:12px;margin-bottom:18px}
.header h1{margin:0;font-size:1.45rem;letter-spacing:.2px}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:0 6px 20px rgba(18,42,65,.06)}
.hero{position:relative;height:78px;background:linear-gradient(90deg,rgba(23,201,72,.12),rgba(18,42,65,.10))}
.hero svg{position:absolute;right:14px;bottom:8px;opacity:.28}
.content{padding:18px 16px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.full{grid-column:1/-1}
label{display:block;font-weight:650;margin:4px 2px}
input,select,textarea{width:100%;padding:12px;border:1px solid var(--border);border-radius:12px;background:#fff;color:#111827;outline:none}
input:focus,select:focus,textarea:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(23,201,72,.18)}
textarea{min-height:96px;resize:vertical}
.actions{display:flex;gap:10px;margin-top:12px}
button{padding:12px 16px;border-radius:12px;border:1px solid var(--ink);background:var(--ink);color:#fff;font-weight:700;cursor:pointer}
button.secondary{background:#fff;color:var(--ink)}
.note{color:var(--muted);font-size:.9rem;margin-bottom:8px}
.success,.error{display:none;margin-top:12px;padding:12px;border-radius:10px}
.success{background:#e8f5e9;border:1px solid #c8e6c9;color:#2e7d32}
.error{background:#ffebee;border:1px solid #ffcdd2;color:#c62828}
@media(max-width:760px){.grid{grid-template-columns:1fr} .header h1{font-size:1.25rem}}
</style>
</head>
<body>
  <div class="wrap">

    <div class="header">
      <!-- Se subir automoney_logo.png no repo, descomente a linha abaixo -->
      <!-- <img src="automoney_logo.png" alt="Automoney" style="height:44px"> -->
      <h1>Cadastro de Leads Automoney</h1>
    </div>

    <div class="card">
      <div class="hero" aria-hidden="true">
        <!-- Ícone de carro em SVG -->
        <svg width="120" height="60" viewBox="0 0 120 60" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 38h78l10-12H74l-8-10H40l-8 10H12c-3 0-6 2-6 6v6c0 3 3 6 6 6h4a8 8 0 1 0 16 0h36a8 8 0 1 0 16 0h6c3 0 6-3 6-6v-4" stroke="#122A41" stroke-width="3" fill="none"/>
          <circle cx="34" cy="50" r="6" stroke="#122A41" stroke-width="3"/>
          <circle cx="90" cy="50" r="6" stroke="#122A41" stroke-width="3"/>
        </svg>
      </div>
      <div class="content">
        <div class="note">Os envios caem direto na planilha.</div>

        <form id="leadForm" class="grid" autocomplete="on">
          <div class="full">
            <label for="portal">Portal *</label>
            <select id="portal" name="portal" required>
              <option value="">Selecione…</option>
              <option>Na Pista</option>
              <option>Usados BR</option>
              <option>Webmotors</option>
              <option>Chaves na Mão</option>
              <option>Mobi Auto</option>
              <option>OLX</option>
              <option>Só Carrão</option>
              <option>Mercado Livre</option>
              <option>iCarros</option>
            </select>
          </div>

          <div>
            <label for="nome">Nome *</label>
            <input id="nome" name="nome" required>
          </div>
          <div>
            <label for="cpf">CPF</label>
            <input id="cpf" name="cpf" inputmode="numeric" placeholder="000.000.000-00">
          </div>

          <div>
            <label for="email">E-mail</label>
            <input id="email" name="email" type="email" placeholder="cliente@email.com">
          </div>
          <div>
            <label for="telefone">Telefone</label>
            <input id="telefone" name="telefone" inputmode="tel" placeholder="(41) 9 9999-9999">
          </div>

          <div class="full">
            <label for="veiculo">Veículo de Interesse</label>
            <input id="veiculo" name="veiculo" placeholder="Ex: Renault Duster 2.0 2016">
          </div>

          <div class="full">
            <label for="observacoes">Observações</label>
            <textarea id="observacoes" name="observacoes" placeholder="Ex: avaliar carro na troca; prefere contato à tarde; etc."></textarea>
          </div>

          <div class="actions full">
            <button type="submit">Salvar lead</button>
            <button type="reset" class="secondary">Limpar</button>
          </div>
          <div id="ok" class="success">✅ Lead salvo com sucesso!</div>
          <div id="err" class="error">❌ Não foi possível salvar. Verifique a conexão.</div>
        </form>
      </div>
    </div>
  </div>

<script>
// URL do seu Web App (implantação ativa)
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzJ5DGjbeFe2tMXGeh3FfwBezbb1fW79QRY66sEmzKFQe9cErYtIAS0M1XUave69g/exec";

const ok = document.getElementById('ok');
const err = document.getElementById('err');

document.getElementById('leadForm').addEventListener('submit', async (ev) => {
  ev.preventDefault();
  ok.style.display="none"; err.style.display="none";

  const data = Object.fromEntries(new FormData(ev.target).entries());

  try {
    const r = await fetch(WEB_APP_URL, {
      method: "POST",
      // IMPORTANTE: text/plain evita preflight CORS
      headers: { "Content-Type": "text/plain;charset=utf-8" },
      body: JSON.stringify(data)
    });

    // r.ok é suficiente; mas tentamos ler JSON
    let j = {};
    try { j = await r.json(); } catch(e) {}

    if (r.ok && (j.result === "success" || !j.result)) {
      ok.style.display = "block";
      ev.target.reset();
    } else if (j.result === "duplicate") {
      err.textContent = "⚠️ Este lead já está cadastrado (nome + telefone).";
      err.style.display = "block";
    } else {
      err.textContent = "❌ Não foi possível salvar. Verifique a conexão.";
      err.style.display = "block";
    }
  } catch (e) {
    err.textContent = "❌ Não foi possível salvar. Verifique a conexão.";
    err.style.display = "block";
  }
});
</script>
</body>
</html>
